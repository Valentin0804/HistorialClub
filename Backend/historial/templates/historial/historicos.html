{% extends "historial/base.html" %}
{% load static %}

{% block title %}Partidos Hist칩ricos{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/historicos.css' %}">
{% endblock %}
{% block content %}

<h1 class="mb-4">Partidos Hist칩ricos</h1>

<div class="card mb-4">
    <div class="card-body">
        <form method="get" class="row g-3">
            <div class="col-md-5">
                <label for="temporada" class="form-label">Temporada</label>
                <select name="temporada" id="temporada" class="form-select">
                    <option value>Todas las temporadas</option>
                    {% for temporada in temporadas %}
                    <option value="{{ temporada }}" {% if filtros.temporada == temporada %}selected{% endif %}>
                        {{ temporada }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-5">
                <label for="equipo" class="form-label">Equipo Rival</label>
                <select name="equipo" id="equipo" class="form-select">
                    <option value>Todos los equipos</option>
                    {% for equipo in equipos %}
                    <option value="{{ equipo.id }}" {% if filtros.equipo == equipo.id|stringformat:"s" %}selected{% endif %}>
                        {{ equipo.nombre }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-2 d-flex align-items-end">
                <button type="submit"
                    class="btn btn-primary w-100">Filtrar</button>
            </div>
        </form>
    </div>
</div>


<div class="table-responsive">

    <table class="table table-striped ">
        <thead class="table-success align-content-center">
            <tr>
                <th>Partidos jugados</th>
                <th>Victorias</th>
                <th>Derrotas</th>
                <th>Empates</th>
                <th>Goles a favor</th>
                <th>Goles en contra</th>
                <th>Amarillas</th>
                <th>Rojas</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ estadisticas.partidos }} </td>
                <td>{{ estadisticas.victorias }} </td>
                <td>{{ estadisticas.derrotas }} </td>
                <td>{{ estadisticas.empates }} </td>
                <td>{{ estadisticas.goles_a_favor }} </td>
                <td>{{ estadisticas.goles_en_contra }} </td>
                <td>{{ estadisticas.amarillas }}</td>
                <td>{{ estadisticas.rojas }}</td>
            </tr>

        </tbody>
    </table>

</div>

<br>

<div class="table-responsive">

    <table class="table table-striped">
        <thead class="table-dark">
            <tr>
                <th>Fecha</th>
                <th>Torneo</th>
                <th>Rival</th>
                <th>Instancia</th>
                <th>Resultado</th>
                <th>Condici칩n</th>
                <th>Info</th>
            </tr>
        </thead>
        <tbody>
            {% for partido in partidos %}
            <tr  class="{% if partido.goles_chabas > partido.goles_rival %}ganado
                {% elif partido.goles_chabas < partido.goles_rival %}perdido
                {% else %}empate{% endif %}">

                <td>{{ partido.fecha|date:"d/m/Y" }}</td>
                <td>{{ partido.torneo.nombre }}</td>
                <td>vs {{ partido.rival.nombre }}</td>
                <td>{{ partido.instancia }}</td>
                <td>
                    {% if partido.tipo == 'L' %}
                        {{ partido.goles_chabas }} - {{ partido.goles_rival }}
                    {% else %}
                        {{ partido.goles_rival }} - {{ partido.goles_chabas }}
                    {% endif %}
                </td>
                <td>
                    {% if partido.tipo == 'L' %}
                        <span class="badge bg-primary">Local</span>
                    {% else %}
                        <span class="badge bg-secondary">Visitante</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'detalle_partido' partido.id %}" class="btn btn-sm btn-outline-primary">
                        Ver m치s
                    </a>
                </td>
            </tr>

            {% empty %}
            <tr>
                <td colspan="5" class="text-center">No se encontraron partidos
                    con los filtros seleccionados</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}